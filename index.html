<!DOCTYPE html>
 <html lang="en">
   <head>
     <meta charset="UTF-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     <title>Smart Home Dashboard</title>

     <!-- Tailwind CSS -->
     <script src="https://cdn.tailwindcss.com"></script>


     <!-- Lucide Icons -->
     <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://www.unpkg.com/@eohjsc/era-widget@1.1.3/src/index.js"></script>


     <!-- Highcharts Gantt -->
     <script src="https://code.highcharts.com/gantt/highcharts-gantt.js"></script>
     <script src="https://code.highcharts.com/gantt/modules/exporting.js"></script>
     <script src="https://code.highcharts.com/gantt/modules/accessibility.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

     <!-- Custom CSS -->
     <link rel="stylesheet" href="styles.css" />
   </head>
 <body class="bg-gray-100  max-w-full  mx-auto px-4 h-[400px] sm:h-[500px] w-full overflow-y-auto">
<header class="bg-transparent backdrop-blur-md shadow-md fixed top-0 left-0 right-0 z-50">
  <div class="flex justify-between items-center p-4">
    <!-- Logo -->
    <div class="flex items-center space-x-4">
      <img src="assets/img/logo-era.png" alt="ERa Logo" width="100" />
    </div>

    <!-- Hamburger menu - hiển thị trên màn hình nhỏ -->
    <div class="sm:hidden">
      <button id="menu-toggle" class="text-gray-700 focus:outline-none">
        <!-- Icon hamburger -->
        <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2"
          viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>

    <!-- Navigation links -->
    <div id="menu" class="hidden sm:flex space-x-4">
      <a href="index.html" class="menu-item bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:bg-blue-500 hover:text-white hover:scale-105 hover:shadow-lg">
    Overview
  </a>
  <a href="analytics.html" class="menu-item bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:bg-blue-500 hover:text-white hover:scale-105 hover:shadow-lg">
    Analytics
  </a>
  <a href="#" class="menu-item bg-gray-300 text-gray-700 py-2 px-4 rounded-lg transition duration-300 ease-in-out transform hover:bg-blue-500 hover:text-white hover:scale-105 hover:shadow-lg">
    Monitoring
  </a>
    </div>
  </div>

  <!-- Dropdown menu for mobile -->
  <div id="mobile-menu" class="sm:hidden m-4 hidden flex-col space-y-2">
    <a href="index.html" class="bg-gray-300 text-gray-700 py-2 px-4 rounded-lg block">
      Overview
    </a>
    <a href="analytics.html" class="bg-gray-300 text-gray-700 py-2 px-4 rounded-lg block">
      Analytics
    </a>
    <a href="#" class="bg-gray-300 text-gray-700 py-2 px-4 rounded-lg block">
      Monitoring
    </a>
  </div>
</header>
         <!-- EM2M Energy Meter Readings -->
        <div class="p-8 rounded-lg shadow-md mt-6 mt-[100px]"> <!-- Adjust mt value -->
  <h2 class="text-lg font-bold text-gray-700 mb-4">
    Thông số Đồng hồ điện EM2M
  </h2>
           <div
             class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 text-center">
             <div class="p-2 border rounded">
               <div class="text-sm text-gray-500">Điện áp</div>
               <div class="text-2xl font-bold text-blue-600" id="voltageValue">
                 220 V
               </div>
               <div class="bg-gray-300 h-2 rounded-lg overflow-hidden mb-2">
                 <div id="voltageProgress" class="bg-blue-500 h-full"></div>
               </div>
             </div>
             <div class="p-2 border rounded">
               <div class="text-sm text-gray-500">Dòng điện</div>
               <div class="text-2xl font-bold text-green-600" id="currentValue">
                 10 A
               </div>
               <div class="bg-gray-300 h-2 rounded-lg overflow-hidden mb-2">
                 <div id="currentProgress" class="bg-green-500 h-full"></div>
               </div>
             </div>
             <div class="p-2 border rounded">
               <div class="text-sm text-gray-500">Công suất</div>
               <div class="text-2xl font-bold text-yellow-500" id="powerValue">
                 2200 W
               </div>
               <div class="bg-gray-300 h-2 rounded-lg overflow-hidden mb-2">
                 <div id="powerProgress" class="bg-yellow-500 h-full"></div>
               </div>
             </div>
             <div class="p-2 border rounded">
               <div class="text-sm text-gray-500">Tần số</div>
               <div
                 class="text-2xl font-bold text-purple-600"
                 id="frequencyValue">
                 50 Hz
               </div>
               <div class="bg-gray-300 h-2 rounded-lg overflow-hidden mb-2">
                 <div id="frequencyProgress" class="bg-purple-500 h-full"></div>
               </div>
             </div>
             <div class="p-2 border rounded">
               <div class="text-sm text-gray-500">Hệ số công suất</div>
               <div
                 class="text-2xl font-bold text-red-500"
                 id="powerFactorValue">
                 0.9
               </div>
               <div class="bg-gray-300 h-2 rounded-lg overflow-hidden mb-2">
                 <div id="powerFactorProgress" class="bg-red-500 h-full"></div>
               </div>
             </div>
             <div class="p-2 border rounded">
               <div class="text-sm text-gray-500">Điện năng tiêu thụ</div>
               <div class="text-2xl font-bold text-indigo-500" id="energyValue">
                 500 kWh
               </div>
               <div class="bg-gray-300 h-2 rounded-lg overflow-hidden mb-2">
                 <div id="energyProgress" class="bg-indigo-500 h-full"></div>
               </div>
             </div>
           </div>
         </div>
         <div>
           <!-- See Full Report Button -->
           <button
             id="openModalBtn"
             class="text-yellow-700 font-semibold hover:bg-yellow-600 hover:text-white neon-card p-4 mt-6 transition-all hover:scale-105 bg-transparent text-white py-2 px-4 rounded-lg">
            Xem chi tiết báo cáo          </button>

           <!-- ✅ MODAL -->
           <div
             id="fullReportModal"
             class="fixed inset-0 z-50 bg-black bg-opacity-50 flex justify-center items-center hidden">
             <div
            class="bg-white/50 backdrop-blur-md rounded-lg shadow-lg p-12 w-full max-w-3xl relative">              <button
                 id="closeModalBtn"
                 class="absolute top-2 right-2 text-gray-600  hover:text-pink-500 text-4xl">
                 &times;
               </button>
               <h3 class="text-2xl font-bold mb-4 text-center">
                 Báo cáo chi tiết thông số
               </h3>
               <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                 <div>
                   <p class="text-gray-500 text-sm">Điện áp</p>
                   <p class="text-lg font-semibold" id="modalVoltage">-- V</p>
                 </div>
                 <div>
                   <p class="text-gray-500 text-sm">Dòng điện</p>
                   <p class="text-lg font-semibold" id="modalCurrent">-- A</p>
                 </div>
                 <div>
                   <p class="text-gray-500 text-sm">Công suất</p>
                   <p class="text-lg font-semibold" id="modalPower">-- W</p>
                 </div>
                 <div>
                   <p class="text-gray-500 text-sm">Tần số</p>
                   <p class="text-lg font-semibold" id="modalFrequency">-- Hz</p>
                 </div>
                 <div>
                   <p class="text-gray-500 text-sm">Hệ số công suất</p>
                   <p class="text-lg font-semibold" id="modalPowerFactor">--</p>
                 </div>
                 <div>
                   <p class="text-gray-500 text-sm">Điện năng tiêu thụ</p>
                   <p class="text-lg font-semibold" id="modalEnergy">-- kWh</p>
                 </div>
               </div>

               <!-- Button to download the report -->
               <button
                 id="downloadReportBtn"
                 class="mt-6 bg-blue-500 bg-white text-pink-600 hover:bg-pink-600 stroke-current hover:text-white py-2 px-4 rounded-lg w-full">
               Tải xuống báo cáo
             </button>
             </div>
           </div>
         </div>
       </div>
     </div>

     <div class="grid mt-8 grid-cols-1 lg:grid-cols-2 gap-4">
 <div class="bg-white font-sans p-6">

   <div class="max-w-2xl mx-auto">
     <h2 class="text-2xl font-bold text-gray-800 mb-4">History</h2>


    <!-- Controls -->
    <div class="flex flex-wrap items-center gap-4 mb-6">
      <label class="flex flex-col text-xs text-gray-600">
        From
        <input type="date" id="fromDate" class="border-gray-300 rounded p-2 text-sm"/>
      </label>
      <label class="flex flex-col text-xs text-gray-600">
        To
        <input type="date" id="toDate" class="border-gray-300 rounded p-2 text-sm"/>
      </label>
      <label class="flex items-center text-xs text-gray-600 space-x-2">
        <span>Price (₫/kWh)</span>
        <input type="number" id="priceInput" value="3000" class="border-gray-300 rounded p-2 w-24 text-sm"/>
      </label>
      <button id="updateBtn" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded text-sm">
        Update
      </button>
      <button onclick="showReport()" class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm">
        Xem hóa đơn
      </button>
    </div>

      <!-- Chart -->
    <div id="historyChart" class="w-full h-96 mb-8"></div>

    <!-- Report Modal -->
  <div id="reportModal" class="fixed inset-0 bg-black bg-opacity-30 backdrop-blur-sm hidden flex items-center justify-center z-50 px-4 sm:px-6">
  <div class="bg-white p-6 rounded-lg w-full max-w-xl shadow-lg relative">
    <button onclick="document.getElementById('reportModal').classList.add('hidden')" class="absolute top-2 right-2 text-gray-400 hover:text-red-600 text-xl">×</button>
    <h3 class="text-lg font-semibold mb-4">Hóa đơn tiền điện</h3>
    <div id="reportContent" class="text-sm space-y-2"></div>
    <div class="mt-4 text-right">
      <button id="downloadReport" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded text-sm">
        Tải xuống hóa đơn (PDF)
      </button>
    </div>
  </div>
</div>

  </div>

<!-- Modal báo cáo -->
<div
  id="reportModal"
  class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50"
>
  <div class="bg-white p-6 rounded-lg shadow-lg max-w-xl w-full relative">
    <button
      id="closeReport"
      class="absolute top-2 right-2 text-gray-500 hover:text-red-500"
    >
      ✕
    </button>
    <h3 class="text-xl font-semibold text-gray-800 mb-4">Báo cáo hóa đơn</h3>
    <div id="reportContent" class="text-sm text-gray-700 space-y-3"></div>
  </div>
</div>
</div>
       <!-- Center Panel -->
<div class=" p-4 bg-gradient-to-br rounded-lg from-[#0f172a] via-[#1e293b] to-[#3b0764]">
  <!-- Card mờ trong suốt -->
   <!-- Card 1 -->
  <div class="bg-white/10 backdrop-blur-md rounded-2xl shadow-md p-4 mb-4 border border-white/20">
    <!-- Tiêu đề và trạng thái -->
    <div class="flex justify-between items-center mb-2">
      <h2 class="text-lg font-semibold text-white">Khu Vườn</h2>
      <div class="flex items-center space-x-2">
        <span class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></span>
        <span class="text-sm text-green-400">Online</span>
      </div>
    </div>
    <!-- Điện năng tiêu thụ -->
    <div class="flex items-center justify-between mb-2">
      <span class="text-sm text-gray-300">Điện năng tiêu thụ</span>
<span id="powerConsumptionGarden" class="text-sm font-medium text-white">-- W</span>
    </div>

    <!-- Nút bật tắt điện tổng -->
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-300">Điện tổng</span>
      <label class="relative inline-flex items-center cursor-pointer">
        <input type="checkbox" class="sr-only peer" id="powerSwitchLivingRoom" onchange="togglePower('livingRoom')">
        <div class="w-11 h-6 bg-red-300 peer-focus:outline-none rounded-full peer peer-checked:bg-green-500 transition-colors"></div>
        <span class="ml-3 text-sm font-medium text-gray-300">CP tổng</span>
      </label>
    </div>
    <div class="flex  items-center mt-4 space-x-6">
  <i data-lucide="flower-2" id="den1" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="sun" id="den2" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="lightbulb" id="den3" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="lightbulb" id="den4" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
</div>
  </div>
     <!-- Card 2 -->

  <div class="bg-white/10 backdrop-blur-md rounded-2xl shadow-md p-4 mb-4 border border-white/20">

    <!-- Tiêu đề và trạng thái -->
    <div class="flex justify-between items-center mb-2">
      <h2 class="text-lg font-semibold text-white">Phòng Khách</h2>
      <div class="flex items-center space-x-2">
        <span class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></span>
        <span class="text-sm text-green-400">Online</span>
      </div>
    </div>

    <!-- Điện năng tiêu thụ -->
    <div class="flex items-center justify-between mb-2">
      <span class="text-sm text-gray-300">Điện năng tiêu thụ</span>
      <span id="powerConsumptionLivingRoom" class="text-sm font-medium text-white">-- W</span>
    </div>

    <!-- Nút bật tắt điện tổng -->
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-300">Điện tổng</span>
      <label class="relative inline-flex items-center cursor-pointer">
        <input type="checkbox" class="sr-only peer" id="powerSwitchLivingRoom" onchange="togglePower('livingRoom')">
        <div class="w-11 h-6 bg-red-300 peer-focus:outline-none rounded-full peer peer-checked:bg-green-500 transition-colors"></div>
        <span class="ml-3 text-sm font-medium text-gray-300">CP tổng</span>
      </label>
    </div>
<div class="flex  items-center mt-4 space-x-6">
  <i data-lucide="air-vent" id="den1" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="cast" id="den2" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="music-4" id="den3" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="lightbulb" id="den4" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
</div>
</div>
    <!-- Card 3 -->

<div class="bg-white/10 backdrop-blur-md rounded-2xl shadow-md p-4 mb-4 border border-white/20">

    <!-- Tiêu đề và trạng thái -->
    <div class="flex justify-between items-center mb-2">
      <h2 class="text-lg font-semibold text-white">Phòng Bếp</h2>
      <div class="flex items-center space-x-2">
        <span class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></span>
        <span class="text-sm text-green-400">Online</span>
      </div>
    </div>

    <!-- Điện năng tiêu thụ -->
    <div class="flex items-center justify-between mb-2">
      <span class="text-sm text-gray-300">Điện năng tiêu thụ</span>
<span id="powerConsumptionKitchen" class="text-sm font-medium text-white">-- W</span>
    </div>

    <!-- Nút bật tắt điện tổng -->
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-300">Điện tổng</span>
      <label class="relative inline-flex items-center cursor-pointer">
        <input type="checkbox" class="sr-only peer" id="powerSwitchLivingRoom" onchange="togglePower('livingRoom')">
        <div class="w-11 h-6 bg-red-300 peer-focus:outline-none rounded-full peer peer-checked:bg-green-500 transition-colors"></div>
        <span class="ml-3 text-sm font-medium text-gray-300">CP tổng</span>
      </label>
    </div>
    <div class="flex  items-center mt-4 space-x-6">
  <i data-lucide="air-vent" id="den1" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="cast" id="den2" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="lightbulb" id="den3" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="lightbulb" id="den4" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
</div>
</div>
   <!-- Card 4 -->

<div class="bg-white/10 backdrop-blur-md rounded-2xl shadow-md p-4 border border-white/20">

    <!-- Tiêu đề và trạng thái -->
    <div class="flex justify-between items-center mb-2">
      <h2 class="text-lg font-semibold text-white">Phòng Ngủ</h2>
      <div class="flex items-center space-x-2">
        <span class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></span>
        <span class="text-sm text-green-400">Online</span>
      </div>
    </div>

    <!-- Điện năng tiêu thụ -->
    <div class="flex items-center justify-between mb-2">
      <span class="text-sm text-gray-300">Điện năng tiêu thụ</span>
<span id="powerConsumptionBedroom" class="text-sm font-medium text-white">-- W</span>
    </div>

    <!-- Nút bật tắt điện tổng -->
    <div class="flex items-center justify-between">
      <span class="text-sm text-gray-300">Điện tổng</span>
      <label class="relative inline-flex items-center cursor-pointer">
        <input type="checkbox" class="sr-only peer" id="powerSwitchLivingRoom" onchange="togglePower('livingRoom')">
        <div class="w-11 h-6 bg-red-300 peer-focus:outline-none rounded-full peer peer-checked:bg-green-500 transition-colors"></div>
        <span class="ml-3 text-sm font-medium text-gray-300">CP tổng</span>
      </label>
    </div>
    <div class="flex  items-center mt-4 space-x-6">
  <i data-lucide="air-vent" id="den1" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="lamp" id="den2" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="bed-double" id="den3" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
  <i data-lucide="lightbulb" id="den4" class="w-7 h-7 text-red-500 cursor-pointer transition" onclick="toggleLight(this)"></i>
</div>
  </div>

</div>
       <!-- Right Panel -->
           <!-- Production Section -->
           <!-- Solar Panel A -->



           <!-- Power and Energy Section -->
              <div id="reportCard" class="bg-gradient-to-br mt-8 from-gray-800 via-gray-900 to-black text-white rounded-2xl p-6 shadow-2xl backdrop-blur-lg w-full mx-auto">
  <div class="flex justify-between items-start">
    <div>
      <h3 class="text-xl font-semibold mb-1">Báo cáo hôm nay</h3>
      <p class="text-sm text-white/70">Tổng sản lượng</p>
      <p id="totalKwh" class="text-2xl font-bold text-green-300 mt-1">0.0 kWh</p>

      <p class="mt-3 text-sm text-white/70">Tiết kiệm được</p>
      <p id="savedMoney" class="text-lg font-bold text-emerald-400">0₫</p>

      <div class="mt-4">
        <p class="text-sm text-white/60">So với hôm qua:</p>
        <p id="compareYesterday" class="text-sm font-semibold text-yellow-400">+0.0 kWh (↑0%)</p>
      </div>
    </div>


  </div>

  <!-- Progress bar -->
  <div class="mt-6">
    <div class="flex justify-between text-sm text-white/70 mb-1">
      <span>Đạt được</span>
      <span id="progressPercent">0%</span>
    </div>
    <div class="w-full h-2 bg-white/20 rounded-full overflow-hidden">
      <div id="progressBar" class="h-full bg-gradient-to-r from-green-400 to-green-600 rounded-full transition-all duration-500" style="width: 0%"></div>
    </div>
  </div>
</div>
           <!-- Electricity Price Input -->
           <div class="bg-white p-4 rounded-lg shadow-md mt-6">
             <div class="mb-4">
               <label for="priceInput" class="block text-gray-700 text-sm"
                 >Đơn giá (đ/1kWh):</label
               >
               <input
                 type="number"
                 id="priceInput"
                 class="border border-gray-300 p-2 rounded w-full"
                 placeholder="Nhập đơn giá"
                 onchange="updateElectricityCost()" />
             </div>
             <div class="mb-4">
               <button
                 class="bg-blue-500 text-white py-2 px-4 rounded-lg"
                 onclick="calculateElectricityCost()">
                 Cập nhật hóa đơn điện
               </button>
             </div>
             <div id="electricityCostResult" class="mt-4"></div>
           </div>
         </div>
       </div>

     </div>


     <!-- Custom Script -->
<script src="script.js"></script>


   </body>

 </html>